# Лекция 11 (14.11.2022)
## Методика построения имитационной программной модели вычислительной системы

Для разработки имитационной модели исходная система должна быть представлена как *стохастическая система массового обслуживания*. Это можно объяснить следующим: информация от внешней среды среды поступает в случайные моменты времени, длительность обработки различных типов информации может быть в общем случае различна. Следовательно внешняя среда является (как-бы) <u>*генератором сообщений*</u>. А комплекс вычислительных средств – *<u>обслуживающими устройствами</u>*.

### Обобщенная структурная схема ВС.

![](1.bmp)

**ИИ** – источники информации – выдают на вход буферной памяти (БП) независимые друг от друга сообщения. Закон появления сообщений – произвольный, но задан на перед. 

В **БП** (буферной памяти) сообщения записываются «в навал» и выбираются по одному в обслуживающий аппарат (ОА) по принципу FIFO/LIFO. Длительность обработки одного сообщения в **ОА** в общем случае так же может быть случайной, но закон обработки сообщений должен быть задан. Т.к. быстродействие ОА ограничено то на входе системы в БП возможно сложение данных ожидающих обработки.

**А** – абоненты.

Программная модель из этой системы создается следующим образом:
![](2.bmp)

Программа синхронизации - управляющая программа (осуществляет связь между каждым из этих блоков)

Должна быть обязательно программа сбора статистики (ПБССт – программный блок сбора статистики). Причем статистику программа должна собирать по каждому из объектов модели. Так же должна быть программа, которая позволит "оживить" систему – это программа синхронизации (блок синхронизации), которая покажет когда и в какое время будут активизированы те или иные фрагменты модели.

Если описать каждый блок ВС с помощью программного имитатора и задать соответствующие связи между ними, то получаем имитационную или программную модель системы.

## Моделирование потока сообщений
Поток сообщений обычно имитируется <u>моментами появление очередного сообщения в потоке</u>

Как вычисляется момент текущего времени.

$\Large t_i=\sum^{i-1}_{k=1}T_k+T_i$

![](3.bmp)

|Тип распределения | Выражение |
|------------------|-----------|
|равномерное на [a,b] | $\large T_i=a+(b-a)R$ |
|экспоненциальное | $\large T_i=-\frac{1}{\lambda} ln(1-R)$ |
|нормальное | $\large T_i = \sigma_X\sqrt{\frac{12}{n}}(\sum^n_{i=1}R_i-\frac{n}{2}) + M_X, n=12$|
|Эрланга | $\large T_i=\frac{1}{k \lambda} \sum^k_{i=1}ln(1-R_i)$ |

## Моделирование работы Обслуживающего Аппарата.

Программа, имитирующая работу обслуживающего аппарата это набор программ, вырабатывающий случайные отрезки времени, соответствующие длительностям обслуживания требований. 

Например, если требования от источника обрабатываются в ОА по нормальному закону с параметрами $M_x$ и $\sigma_x$, то длительность обработки i-ого требования:

$T_{обр}=M_x+(\sum^{12}_{i=1}R_i-6)*\sigma_x$

**Схема алгоритма имитатора.**

![](4.bmp)

$R_i$ – случайное число с равномерным законом распределения

$Т_{ОБР}$ – время обработки очередного сообщения

$T$ – время освобождения ОА

$XM$ – Мат ожидание для заданного закона обратки

DX – СКО (средне квадратичное отклонение) для заданного закона обратоки
 
 $T_{ОБР}=XM+(S-6)*DX$

## Моделирование работы абонентов.
Абонент может рассматриваться как Обслуживающий Аппарат, поток информации, на который поступает от процессора. 
Для имитации работы абонентов необходимо составить программу выработки длительности обслуживания требования. Кроме того, абонент сам может быть источником заявок, вообще на любые ресурсы вычислительной системы. Эти заявки могут имитироваться с помощью генератора сообщений, распределенными по заданному закону. Таким образом, абонент либо имитируется как ОА, либо как генератор.

## Моделирование работы буферной памяти.
**Память** - относится к электромеханическому устройству (предназначенное для хранения, записи, считывания), включающее в себя: среду для запоминания, устройство управления, (информация находится по адресу) база + смещение + [индекс].

**Свойства памяти**: предназначена для хранения, чтения и записи информации.

В блок статистики: ошибки записи, ошибки чтения.

Блок памяти должен производить запись и считывание числа, выдавать сигнал переполнения и отсутствия данных в любой момент времени располагать сведениями о количестве находящихся в ней (в блоке) заявок. Сама запоминающая среда в простейшем случае имитируется одномерным массивом, размер которого определяет ёмкость памяти. Каждый элемент этого массива может быть либо «свободен» и в этом случае мы считаем, что он равен 0, либо «занят», в этом случае в качестве эквивалента требования ему присваивается значение времени появления этой записи. (занесем время обращения к памяти)

Концептуальная модель программной памяти:

![](5.bmp)

Алгоритм реализации работы буферной памяти:

![](6.bmp)